<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Метод анализа</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Метод анализа</h1>
    <p>Методом анализа является метод рекурсивного спуска, представленный кодом ниже:</p>
<pre><code class="csharp">
 public class ParsedToken
 {
     public int Number { get; set; }
     public int StartPosition { get; set; } // Начальная позиция токена
     public int EndPosition { get; set; }   // Конечная позиция токена
     public string Info { get; set; }
 }
 private List<Token> tokens; 
 private int currentPosition; 
 
 private List<ParsedToken> ParseTokens(List<Token> tokens)
 {
     List<ParsedToken> parsedTokens = new List<ParsedToken>();
     int lineNumber = 1;
     int Scale = 1;
     bool exstuct=true;
     bool expectingIdentifier = false;
     bool expectingOperator = false;
     bool expectingOpenBracket = false;
     bool expectingNumber = false;
     bool expectingNumber2 = false; //Int
     bool expectingComma = false;
     bool expectingCloseBracket = false;
     bool sihn = false;   // =
     bool skipSpace = false;
     bool stuct=false;
     bool Plus = false;
     bool Minus = false;
     bool Space2 = false; 
     int d=0;
     foreach (var token in tokens)
     {
         if (token.Type == TokenType.пробел)
         {
             if (skipSpace)
             {
                 parsedTokens.Add(new ParsedToken
                 {
                     Number = lineNumber,
                     StartPosition = token.Column + 1,
                     EndPosition = token.ColumnNext + 1,
                     Info = "Множество пробелов"
                 });
             }
             skipSpace = true;
             continue;
         }
         else
         {
             skipSpace = false;
         }
         switch (token.Type)
         {
             case TokenType.структура:
                 if (exstuct)
                 {
                     parsedTokens.Add(new ParsedToken
                     {

                     });
                     
                     stuct = true;
                     exstuct = true;
                     Scale++;
                 }
                 else
                 {

                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber,
                         StartPosition = token.Column + 1,
                         EndPosition = token.ColumnNext + 1,
                         Info = token.Value
                     });
                     
                     stuct = true;
                     exstuct = true;
                     Scale++;
                 }
                 break;

             case TokenType.оператор:
                 if (stuct)
                 {
                     parsedTokens.Add(new ParsedToken
                     {
                        
                     });
                    
                     stuct = false;
                     expectingIdentifier = true;
                     Scale++;

                 }
                 else
                 {

                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber,
                         StartPosition = token.Column + 1,
                         EndPosition = token.ColumnNext + 1,
                         Info = token.Value
                     }); ; 
                    
                     stuct = false;
                     expectingIdentifier = true;
                 }
                 break;

             case TokenType.идетификатор:
                     
                 if (expectingIdentifier)
                 {
                     parsedTokens.Add(new ParsedToken
                     {
                        
                     });
                     expectingIdentifier = false;
                     expectingOperator = false;
                     sihn = true;
                     Scale++;
                     
                 }
                 else
                 {
                     
                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber,
                         StartPosition = token.Column + 1,
                         EndPosition = token.ColumnNext + 1,
                         Info = token.Value
                     });
                     
                     expectingOperator = false;
                     sihn = true;
                 }
                 break;
                
             case TokenType.оператор_присваивания:
                 if (sihn)
                 {

                     parsedTokens.Add(new ParsedToken
                     {



                     });
                     
                     Scale++;
                     sihn = false;
                     expectingIdentifier = false;
                     expectingOpenBracket = true;
                 }
                 else
                 {
                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber++,
                         StartPosition = token.Column + 1,
                         EndPosition = token.ColumnNext + 1,
                         Info = token.Value
                     });
                     currentPosition += token.Value.Length;
                    
                     expectingIdentifier = false;
                     expectingOpenBracket = true;
                 }
                 break;
             case TokenType.открывающая_скобка:
                 if (expectingOpenBracket)
                 {

                     parsedTokens.Add(new ParsedToken
                     {



                     });
                    
                     Scale++;
                     expectingOpenBracket = false;
                     expectingNumber = true;   
                     sihn = false;
                     Minus = true;
                     Plus = true;
                 }
                 else
                 {

                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber++,
                         StartPosition = token.Column + 1,
                         EndPosition = token.ColumnNext + 1,
                         Info = token.Value

                     });
                    
                     expectingNumber = true;
                     sihn = false;
                     Minus = true;
                     Plus = true;
                 }
                 break;
             case TokenType.Минус:
                 {
                     if (Minus)
                     {
                         parsedTokens.Add(new ParsedToken
                         {



                         });
                         
                         Scale++;
                         Minus = false;
                         expectingNumber = true;
                         expectingNumber2 = true;
                     }

                     else
                     {
                         parsedTokens.Add(new ParsedToken
                         {
                             Number = lineNumber++,
                             StartPosition = token.Column + 1,
                             EndPosition = token.ColumnNext + 1,
                             Info = token.Value
                         });
                        
                         expectingNumber = true;
                         expectingNumber2 = true;
                     }
                 }
                 break;

             case TokenType.Плюс:
                 {
                     if (Plus)
                     {
                         parsedTokens.Add(new ParsedToken
                         {



                         });
                        
                         Scale++;
                         Plus = false;
                         expectingNumber = true;
                         expectingNumber2 = true;
                     }

                     else
                     {
                         parsedTokens.Add(new ParsedToken
                         {
                             Number = lineNumber++,
                             StartPosition = token.Column + 1,
                             EndPosition = token.ColumnNext + 1,
                             Info = token.Value
                         });
                         
                         expectingNumber = true;
                         expectingNumber2 = true;
                     }
                 }
                 break;
             case TokenType.Целое_без_знака:
                 if (expectingNumber)
                 {
                     
                     parsedTokens.Add(new ParsedToken
                     {



                     });
                    
                     Scale++;
                     expectingNumber = false;
                     expectingOpenBracket = false;
                     expectingComma = true;
                 }
                 else
                 {
                     
                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber++,
                         StartPosition = token.Column+1, 
                         EndPosition = token.ColumnNext + 1,   
                         Info = token.Value

                     });
                   
                     expectingOpenBracket = false;
                     expectingComma = true;
                 }
                 break;
             case TokenType.символ_разделения_параметров:
                 if (expectingComma)
                 {
                    
                     parsedTokens.Add(new ParsedToken
                     {


                     });
                  
                     Scale++;
                     expectingComma = false;
                     expectingNumber = false;
                     expectingNumber2 = true;
                     Minus = true;
                     Plus = true;
                 }
                 else
                 {
                    
                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber++,
                         StartPosition = token.Column + 1,  
                         EndPosition = token.ColumnNext + 1,   
                         Info = token.Value

                     });
                    
                     expectingNumber = false;
                     expectingNumber2 = true;
                     Minus = true;
                     Plus = true;
                 }
                 break;
             case TokenType.Целое_без_знака2:
                 if (expectingNumber2)
                 {
                     expectingNumber = true;

                     parsedTokens.Add(new ParsedToken
                     {

                     });
                   
                     Scale++;
                     expectingNumber2 = false;
                     expectingComma = false;
                     expectingCloseBracket = true;
                 }
                 else
                 {
                     
                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber++,
                         StartPosition = token.Column + 1,  
                         EndPosition = token.ColumnNext + 1, 
                         Info = token.Value
                     });
                    
                     expectingComma = false;
                     expectingCloseBracket = true;
                 }
                 break;
             case TokenType.Закрывающая_скобка:
                 
          if (expectingCloseBracket)
                 {
                     parsedTokens.Add(new ParsedToken
                     {
                         
                         
                         
                     });
                    
                     Scale++;
                     expectingNumber2 = false;
                     expectingCloseBracket = false;
                     exstuct = false;
                     
                 }
                 else
                 {
                   
                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber++,
                         StartPosition = token.Column+1,  
                         EndPosition = token.ColumnNext +1,  
                         Info = token.Value
                     });
                    
                     expectingNumber2 = false;
                     expectingCloseBracket = false;
                 }
                 break;
                 default:
                 if (Scale <= 10 || Scale == 11 || Scale == 12)
                 {
                     parsedTokens.Add(new ParsedToken
                     {
                         Number = lineNumber++,
                         StartPosition = token.Column + 1,
                         EndPosition = token.ColumnNext + 1,
                         Info = $"Ошибка {token.Value}"
                     });
                     currentPosition -= token.Value.Length;
                     break;
                 }
                 else break;
         }
     }
     
     return parsedTokens;
 }

</code></pre>
</body>
</html>